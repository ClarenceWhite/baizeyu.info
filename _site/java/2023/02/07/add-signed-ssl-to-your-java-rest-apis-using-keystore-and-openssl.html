<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="/assets/css/navbar.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/home.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/about.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/tech.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/index.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/post.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/toc.js"></script>

    <meta charset="utf-8" />
    <title>Blog | Zeyu (Clarence)</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light">
    <a class="navbar-brand" href="/index">
        <img src="/assets/images/signature_en.png" width="auto" height="60px" class="d-inline-block align-top"
            alt="brand_logo">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="/pages/about">About</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pages/tech/">Tech</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pages/life/">Life</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pages/reading/">Reading</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/pages/music/">Music</a>
            </li>
        </ul>
    </div>
</nav> <div class="post">
    <div class="title">
        <h1>Add Signed SSL to your Java REST APIs using Keystore and Openssl</h1>
    </div>

    <div class="content-area">
        <div id="toc">
            <div
                style="color:darkgoldenrod; font-weight:bolder; font-size:1.5rem; text-decoration: underline; margin-bottom: 1.2rem;">
                OUTLINE</div>
            <!-- Table of contents will be generated here -->
        </div>
        <div class="blog-content">
            <h1 id="intro">Intro</h1>

<p>When we are building an application with front-end and back-end separation, our front-end is on one server, and the back-end is on another server. When the front-end has https but the back-end does not support https, the front-end will not be able to make API calls due to security reasons. How to solve this? The article will introduce you a simple way to secure your Java RESTful APIs.</p>

<h1 id="prerequisite">Prerequisite</h1>

<ul>
  <li><a href="https://macappstore.org/openssl/">openssl</a> (this link provides you on how to install this command line tool on macOS, if you are using Windows, try to search for that üò∂‚Äçüå´Ô∏è)</li>
  <li>keytool: Keytool is included as part of the Java runtime. So by installing Java, you‚Äôll also have keytool in your system.</li>
  <li>CA signed certificate including two files: ‚Äúcertificate.crt‚Äù and ‚Äúprivate.key‚Äù.</li>
</ul>

<h1 id="steps">Steps</h1>

<h2 id="generate-a-jks-file-which-uses-pkcs12-encryption-method">Generate a ‚Äò.jks‚Äô file which uses PKCS12 encryption method</h2>

<p>First, we gonna export a ‚Äò.p12‚Äô file using ‚Äúcertificate.crt‚Äù and ‚Äúprivate.key‚Äù, drag the two files into a folder, open the folder with your terminal, and type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>openssl pkcs12 -export -in certificate.crt -inkey private.key \
               -out cert.p12
</code></pre></div></div>

<p>Now, if you use the command <code class="language-plaintext highlighter-rouge">ls</code>, you will see a file named ‚Äúcert.p12‚Äù has been generated. Next, we are going to create a Java Keystore with it:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>keytool -importkeystore \
	-destkeystore my_first_keystore.jks -deststoretype pkcs12 -destkeypass [your password] -deststorepass [your password]\
	-srckeystore cert.p12 -srcstoretype pkcs12 -srcstorepass [your password]
</code></pre></div></div>

<p>OK, if the second step succeeds, you could see the keystore file named <code class="language-plaintext highlighter-rouge">my_first_keystore.jks</code> in this folder!</p>

<h2 id="apply-the-keystore-on-your-springboot-rest-api-application">Apply the keystore on your SpringBoot REST API application</h2>

<ul>
  <li>Drag your <code class="language-plaintext highlighter-rouge">my_first_keystore.jks</code> into <code class="language-plaintext highlighter-rouge">/src/main/resources</code> folder</li>
  <li>Create an <code class="language-plaintext highlighter-rouge">application.properties</code> config file in the same folder, and add the following configuration in it:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#SSL for SpringBoot Application
server.ssl.key-store=classpath:my_first_keystore.jks
server.ssl.key-store-type=pkcs12
server.ssl.key-store-password=[your password]
server.ssl.key-password=[your password]
</code></pre></div></div>

<p><strong>That‚Äôs it! We are almost set!</strong></p>

<h2 id="test-it">Test it</h2>

<p>Just run the SpringBoot Application, then go to https://localhost:{port}/{your_api_path}, you might see some warning from browser (because the certificate is signed for your domain rather than ‚Äòlocalhost‚Äô, when you deploy your backend applications on the correct domain, this warning will be disappeared), just ignore it and your will see your API response!</p>

        </div>
    </div>
</div>
</body>

</html>